<script>
	import { goto } from '$app/navigation';
	import { onMount } from 'svelte';
    import { page } from '$app/stores';


    const { settings } = $props();   

	let open = $state(false);

	onMount(() => {
		const interval = setInterval(() => {
            now = new Date();
        }, 1000);
        
        return () => clearInterval(interval);
	});

    let now = $state(new Date());
    
    let date = $derived(now.toLocaleDateString('en-GB'));
    
    let parisTime = $derived(now.toLocaleTimeString('en-GB', {
        timeZone: 'Europe/Paris',
        hour12: false
    }));
    
    let londonTime = $derived(now.toLocaleTimeString('en-GB', {
        timeZone: 'Europe/London',
        hour12: false
    }));

    let isSinglePage = $derived(
        $page.url.pathname.startsWith('/project/') || 
        $page.url.pathname.startsWith('/blog/')
    );
	
</script>

<header
	class="header sticky top-0 z-50 md:relative"
>
	<div class="p-3 md:p-5 flex flex-col gap-y-2 md:flex-row flex-wrap md:items-center justify-between  {$page.url.pathname.startsWith('/blog') ? 'text-white' : 'text-red'}">
        <a
                id="logo"
                class="{$page.url.pathname.startsWith('/blog') ? 'blog-logo' : ''}"
                href="/"
            >
            <svg class="max-w-40 md:max-w-60 h-auto" width="709" height="130" viewBox="0 0 709 130" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26.8845 0.364258C18.53 0.364258 11.9512 2.80002 7.17071 7.71708C2.39024 12.6114 0 18.826 0 26.3609V102.712C0 110.725 2.29918 117.053 6.89754 121.72C11.4959 126.387 18.1658 128.709 26.8845 128.709C35.6031 128.709 42.273 126.387 46.8714 121.72C51.4698 117.053 53.7689 110.725 53.7689 102.712V26.3609C53.7689 18.5983 51.4015 12.3154 46.6893 7.53497C41.9771 2.75449 35.3755 0.364258 26.8845 0.364258ZM29.5706 105.216C29.5706 106.172 29.3202 106.901 28.8422 107.356C28.3641 107.834 27.704 108.084 26.8617 108.084C26.0194 108.084 25.3593 107.834 24.8812 107.356C24.4032 106.878 24.1528 106.172 24.1528 105.216V23.8341C24.1528 22.878 24.3804 22.1723 24.8812 21.6943C25.3593 21.2162 26.0194 20.9886 26.8617 20.9886C27.704 20.9886 28.3641 21.2162 28.8422 21.6943C29.3202 22.1723 29.5706 22.9008 29.5706 23.8341V105.216Z" fill="#E30613"/>
<path d="M86.0251 0C77.6707 0 71.0918 2.36747 66.3113 7.07965C61.5309 11.7918 59.1406 17.9154 59.1406 25.4503V105.034C59.1406 112.796 61.4398 118.738 66.0382 122.858C70.6365 126.978 77.3064 129.05 86.0251 129.05C94.2657 129.05 100.549 126.865 104.851 122.494C109.153 118.123 111.316 112.022 111.316 104.123V82.7932H88.734V105.74C88.734 106.582 88.5292 107.242 88.0966 107.72C87.6869 108.198 86.9812 108.426 86.0251 108.426C85.1828 108.426 84.5227 108.175 84.0446 107.72C83.5666 107.242 83.3162 106.582 83.3162 105.74V23.652C83.3162 21.6259 84.204 20.6016 86.0023 20.6016C87.8007 20.6016 88.6885 21.6259 88.6885 23.652V43.9121H111.271V25.4503C111.271 17.6877 109.062 11.4959 104.646 6.89754C100.23 2.29918 94.0153 0 86.0023 0L86.0251 0Z" fill="#E30613"/>
<path d="M113.82 25.0861H124.565V127.274H148.763V25.0861H159.531V1.79834H113.82V25.0861Z" fill="#E30613"/>
<path d="M218.673 0.364258C212.937 0.364258 208.065 1.54799 204.013 3.84717C199.938 1.54799 194.976 0.364258 189.08 0.364258C180.725 0.364258 174.146 2.82279 169.366 7.71708C164.586 12.6114 162.195 18.826 162.195 26.3609V102.712C162.195 110.725 164.494 117.053 169.093 121.72C173.691 126.387 180.361 128.709 189.08 128.709C194.953 128.709 199.87 127.639 203.876 125.522C207.883 127.639 212.8 128.709 218.673 128.709C227.392 128.709 234.062 126.387 238.66 121.72C243.258 117.053 245.558 110.725 245.558 102.712V26.3609C245.558 18.5983 243.19 12.3154 238.478 7.53497C233.766 2.75449 227.164 0.364258 218.673 0.364258ZM191.789 105.216C191.789 106.172 191.561 106.901 191.06 107.356C190.582 107.834 189.922 108.084 189.08 108.084C188.238 108.084 187.577 107.834 187.099 107.356C186.621 106.878 186.371 106.172 186.371 105.216V23.8341C186.371 22.878 186.598 22.1723 187.099 21.6943C187.577 21.2162 188.238 20.9886 189.08 20.9886C189.922 20.9886 190.582 21.2162 191.06 21.6943C191.538 22.1723 191.789 22.9008 191.789 23.8341V105.216ZM221.359 105.216C221.359 106.172 221.132 106.901 220.631 107.356C220.153 107.834 219.493 108.084 218.65 108.084C217.808 108.084 217.148 107.834 216.67 107.356C216.192 106.878 215.941 106.172 215.941 105.216V23.8341C215.941 22.878 216.192 22.1723 216.67 21.6943C217.148 21.2162 217.808 20.9886 218.65 20.9886C219.493 20.9886 220.153 21.2162 220.631 21.6943C221.109 22.1723 221.359 22.9008 221.359 23.8341V105.216Z" fill="#E30613"/>
<path d="M279.248 1.79834H250.93V127.274H274.24V80.494H279.248C286.647 80.494 292.292 78.6046 296.185 74.8485C300.077 71.0924 302.012 64.7185 302.012 55.7494V27.0666C302.012 19.304 299.918 13.1577 295.73 8.60482C291.541 4.07476 286.055 1.79834 279.248 1.79834ZM279.613 54.4974C279.613 57.4795 278.474 58.9819 276.221 58.9819H274.24V23.3105H276.039C278.429 23.3105 279.613 24.8584 279.613 27.9771V54.4974Z" fill="#E30613"/>
<path d="M306.496 127.274H346.288V103.053H329.807V75.4632H345.4V51.2649H329.807V25.9966H346.288V1.79834H306.496V127.274Z" fill="#E30613"/>
<path d="M396.938 71.616C395.686 71.0469 394.115 70.5688 392.34 70.1136C394.775 69.2258 396.824 67.9737 398.463 66.3347C401.923 62.8746 403.654 56.5917 403.654 47.5088V27.0666C403.654 19.304 401.491 13.1577 397.188 8.60482C392.886 4.07476 387.149 1.79834 379.979 1.79834H351.66V127.274H374.971V76.7152C377.475 76.7152 379.159 77.1705 379.979 78.0583C380.821 78.9461 381.231 80.5851 381.231 82.9981V127.274H404.541V87.1184C404.541 82.816 403.972 79.4696 402.834 77.0794C401.696 74.6892 399.738 72.868 396.915 71.616H396.938ZM380.343 53.7689C380.343 55.3169 380.047 56.4095 379.455 57.0014C378.863 57.5933 378.021 57.8892 376.951 57.8892H374.971V23.6519H376.769C379.159 23.6519 380.343 25.1999 380.343 28.3186V53.7689Z" fill="#E30613"/>
<path d="M416.197 1.79834L408.139 127.274H431.085L431.813 102.006H438.802L439.872 127.274H463.547L453.303 1.79834H416.197ZM432.383 81.3818L433.384 46.234L434.909 23.2877L436.435 46.4161L437.914 81.3818H432.383Z" fill="#E30613"/>
<path d="M458.129 25.0861H468.896V127.274H493.095V25.0861H503.839V1.79834H458.129V25.0861Z" fill="#E30613"/>
<path d="M531.633 1.79834H508.322V127.274H531.633V1.79834Z" fill="#E30613"/>
<path d="M563.89 0.364258C555.536 0.364258 548.957 2.82279 544.177 7.71708C539.396 12.6114 537.006 18.826 537.006 26.3609V102.712C537.006 110.725 539.305 117.053 543.903 121.72C548.502 126.387 555.172 128.709 563.89 128.709C572.609 128.709 579.279 126.387 583.877 121.72C588.476 117.053 590.775 110.725 590.775 102.712V26.3609C590.775 18.5983 588.407 12.3154 583.695 7.53497C578.983 2.75449 572.381 0.364258 563.89 0.364258ZM566.577 105.216C566.577 106.172 566.326 106.901 565.848 107.356C565.37 107.834 564.71 108.084 563.868 108.084C563.025 108.084 562.365 107.834 561.887 107.356C561.409 106.878 561.159 106.172 561.159 105.216V23.8341C561.159 22.878 561.386 22.1723 561.887 21.6943C562.365 21.2162 563.025 20.9886 563.868 20.9886C564.71 20.9886 565.37 21.2162 565.848 21.6943C566.326 22.1723 566.577 22.9008 566.577 23.8341V105.216Z" fill="#E30613"/>
<path d="M632.73 62.7152L623.397 1.79834H596.148V127.274H615.862V47.099L627.7 127.274H651.534V1.79834H632.73V62.7152Z" fill="#E30613"/>
<path d="M708.899 41.408V20.4422C708.899 13.5219 706.6 8.37721 702.001 5.03088C697.403 1.68455 691.097 0 683.084 0C675.071 0 668.902 1.73008 664.167 5.19023C659.455 8.65038 657.088 13.6813 657.088 20.2373V48.7381C657.088 51.834 657.657 54.5657 658.795 56.8876C659.933 59.2096 661.276 61.1901 662.824 62.8063C664.372 64.4226 666.58 66.4258 669.449 68.816L670.177 69.3624L680.398 77.7851L680.762 77.9672C682.902 79.8794 684.245 81.4046 684.792 82.5428C685.338 83.681 685.588 85.5705 685.588 88.1883V108.084C685.588 109.04 685.338 109.746 684.86 110.224C684.382 110.702 683.722 110.93 682.88 110.93C681.081 110.93 680.193 109.974 680.193 108.061V87.6192H656.883V107.333C656.883 114.504 659.023 119.922 663.325 123.564C667.628 127.206 674.138 129.027 682.857 129.027C691.575 129.027 697.79 127.343 702.206 123.996C706.623 120.65 708.831 115.642 708.831 108.949V80.2664C708.831 77.1705 708.375 74.5071 707.488 72.2762C706.6 70.0681 705.325 68.0648 703.731 66.2665C702.115 64.4681 699.702 62.2144 696.47 59.46L695.218 58.3901L684.997 49.6031L684.109 48.7153C682.788 47.5088 681.832 46.2568 681.24 44.9364C680.649 43.6161 680.353 41.7039 680.353 39.1999V20.7381C680.353 18.826 681.24 17.8699 683.039 17.8699C684.837 17.8699 685.725 18.826 685.725 20.7381V41.3397H708.853L708.899 41.408Z" fill="#E30613"/>
</svg>
        </a>
        {#if !isSinglePage}
        <div class="ticker-container max-w-8/12 md:max-w-4/12">
            <div class="ticker-wrapper">
                {#each {length: 8} as _, i}
                    <p class=" text-sm leading-none ticker-item">
                        {settings?.description}
                    </p>
                {/each}    
            </div>
        </div>

        
        {/if}
        <p class="text-right text-sm hidden md:block">
            {date}<br/>
            {parisTime} | {londonTime}<br/>
            Paris | Londre
        </p>
	</div>
</header>
